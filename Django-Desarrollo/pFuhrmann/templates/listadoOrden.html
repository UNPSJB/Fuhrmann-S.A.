{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block contenido %}
<div class="container">
    <div class="panel panel-yellow">
        <div class="panel-heading clearfix">
            <h4 class="panel-title pull-left" style="padding-top: 7.5px;"><strong>Listado de Orden de Producción</strong></h4>
            <div class="btn-group pull-right">
                <div class="input-group">
                    <div class="btn-group pull-right">
                        <a class="btn btn-default" type="button" href="#" title="Ayuda" onmouseDown = "alert('Error 404 - Dont Implement')"><span class="glyphicon glyphicon-question-sign"></span></a>
                    </div>
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button" title="Buscar Ej: Nro. Orden - Dni - Nro. Maquina" onmouseDown = "alert('Error 404 - Dont Implement')"><span class="glyphicon glyphicon-search"></span></button>
                    </span>
                    <input type="text" class="form-control" placeholder="Buscar"></input>
                </div> 
            </div>
        </div>
        <div class="panel-body">
            <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="tableLote" width="100%">
                <thead>
                    <tr>
                        <th style="text-align:center;" width="15%">Fecha de Emisión</th>
                        <th style="text-align:center;" width="15%">Inicio Produccion</th>
                        <th style="text-align:center;" width="15%">Fin Produccion</th>
                        <th style="text-align:center;" width="12%">Maquina</th>
                        <th style="text-align:center;" width="5%">Proceso</th>
                        <th style="text-align:center;" width="5%">Finalizada</th>
                        <th style="text-align:center;" width="5%">Cancelada</th>
                        <th style="text-align:center;" width="40%">Acciones</th>
                    </tr>
                    {% for dato in lista %}
                    <tr>
                        <td style="text-align:center;" width="10%">{{dato.FechaEmision}}</td>
                        <td style="text-align:center;" width="10%">{{dato.FechaInicioProduccion}}</td>
                        <td style="text-align:center;" width="10%">{{dato.FechaFinProduccion}}</td>
                        <td style="text-align:center;" width="12%">{{dato.MaquinaActual}}</td>
                        <td style="text-align:center;" width="5%">{{dato.EnProduccion}}</td>
                        <td style="text-align:center;" width="5%">{{dato.Finalizada}}</td>
                        <td style="text-align:center;" width="5%">{{dato.Cancelada}}</td>
                        
                        <td style="text-align:center;" width="40%">
                            <a class="btn btn-default" onClick="showModal('{{dato.NroOrden}}')" title="Ver Detalle"><span class="glyphicon glyphicon-eye-open"></span></a>


                            <a class="btn btn-default" href="/modificarOrdenProduccion/{{dato.NroOrden}}" title="Modificar"><span class="glyphicon glyphicon-edit"></span></a>
                            <a class="btn btn-default" onClick="eliminar('/cancelarOrdenProduccion/{{dato.NroOrden}}', 'Cancelar O. Produccion', '¿Está seguro que quiere cancelar la Orden?')" title="Cancelar" ><span class="glyphicon glyphicon-remove"></span></a>
                            <a class="btn btn-default" href="/enviarOrdenProduccion/{{dato.NroOrden}}" title="Enviar a Produccion"><span class="glyphicon glyphicon-share-alt"></span></a>
                            <a class="btn btn-default" href="finalizarOrdenProduccion/{{dato.NroOrden}}" title="Finalizar Produccion"><span class="glyphicon glyphicon-warning-sign"></span></a>
                            </td>
                    </tr>

                    {% empty %}
                        <li> No existen ordenes de producción registradas </li>
                    {% endfor %}        
                </thead>
            </table>

            <div class="modal fade" id="myModal" role="dialog">
                 <div id="contenidoModal"></div>    
            </div>

            <script type ="text/javascript"> </script>
            <div class="pull-right">
                <a class="btn btn-default btn-gr" type= "button" href="/registrarOrdenProduccion">Nueva</a>
                <a class="btn btn-default btn-gr" type= "button" href="/index">Salir</a>
            </div>            
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
    <script>
        function showModal(id) {
                $('#contenidoModal').load("/verOrdenProduccion/"+id);
                $('#myModal').modal({ show: 'Clip' });
        };

    </script>
{% endblock %}


